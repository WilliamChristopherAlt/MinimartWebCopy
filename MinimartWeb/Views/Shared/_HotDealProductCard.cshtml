@model MinimartWeb.ViewModels.ProductViewModel
@{
    string FormatCurrency(decimal price) => price.ToString("N0") + "đ";
}

<div class="col">
    <div class="card h-100 product-card product-card-hotdeal">
        <a asp-controller="CustomerProducts" asp-action="Details" asp-route-id="@Model.Id" class="product-card-img-link">
            <img src="@(string.IsNullOrEmpty(Model.ImagePath) ? "/images/placeholder.png" : $"/images/products/{Model.ImagePath}")" class="card-img-top product-card-img" loading="lazy" alt="@Model.Name">
        </a>
        <div class="product-card-body text-center">
            <div>
                <h6 class="product-card-title justify-content-center">
                    <a asp-controller="CustomerProducts" asp-action="Details" asp-route-id="@Model.Id" class="text-dark text-decoration-none" title="@Model.Name">@Model.Name</a>
                </h6>

                <p class="product-card-price mb-1">@FormatCurrency(Model.Price)</p>
                @if (Model.TotalUnitsSold > 0)
                {
                    <p class="product-card-sold mb-2">Đã bán: @Model.TotalUnitsSold</p>
                }
            </div>
            @* <div class="product-card-footer mt-3"> *@
            @*     @if (Model.StockAmount > 0 && Model.IsActive) *@
            @*     { *@
            @*         <!-- Add to Cart --> *@
            @*         <form asp-controller="Cart" asp-action="AddToCart" method="post" class="mb-2"> *@
            @*             <input type="hidden" name="productId" value="@Model.Id" /> *@
            @*             <input type="hidden" name="quantity" value="1" /> *@
            @*             <button type="submit" class="btn btn-outline-secondary w-100" title="Thêm vào giỏ"> *@
            @*                 <i class="fas fa-cart-plus me-1"></i> Thêm vào giỏ *@
            @*             </button> *@
            @*         </form> *@

            @*         <!-- Buy Now --> *@
            @*         <form asp-controller="Cart" asp-action="BuyNow" method="post"> *@
            @*             <input type="hidden" name="productId" value="@Model.Id" /> *@
            @*             <input type="hidden" name="quantity" value="1" /> *@
            @*             <button type="submit" class="btn btn-outline-warning w-100" title="Mua ngay"> *@
            @*                 <i class="fas fa-bolt me-1"></i> Mua ngay *@
            @*             </button> *@
            @*         </form> *@


            @*     } *@
            @*     else *@
            @*     { *@
            @*         <button type="button" class="btn btn-secondary w-100" disabled>Hết hàng</button> *@
            @*     } *@
            @* </div> *@

        </div>
    </div>
</div>